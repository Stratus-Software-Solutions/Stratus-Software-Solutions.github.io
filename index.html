<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>TF Demo</title>
<link href="css/simpleGridTemplate.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
  integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
  crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
  integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
  crossorigin=""></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<!--The following script tag downloads a font from the Adobe Edge Web Fonts server for use within the web page. We recommend that you do not modify it.--><script>var __adobewebfontsappname__="dreamweaver"</script><script src="http://use.edgefonts.net/poiret-one:n4:default;italiana:n4:default;gruppo:n4:default;antic-slab:n4:default;esteban:n4:default;french-canon:n4:default;electrolize:n4:default.js" type="text/javascript"></script>
<style>
  #point_select_map { height: 350px; }
</style>

	<link rel="apple-touch-icon" sizes="180x180" href="images/favicon//apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon//favicon-16x16.png">
<link rel="manifest" href="images/favicon//site.webmanifest">
<link rel="mask-icon" href="images/favicon//safari-pinned-tab.svg" color="#000000">
<meta name="apple-mobile-web-app-title" content="Interagency Task Force">
<meta name="application-name" content="Interagency Task Force">
<meta name="msapplication-TileColor" content="#000000">
<meta name="theme-color" content="#000000">
</head>
<body>
<!-- Main Container -->
<div class="container">
  <!-- Header -->
  <header class="header">
    <h4 class="logo"><img src="images\Logo_TF2@3x.png" id="header_logo"></img></h4>
	<p>Fill this section with text, or statement regarding the form</p>
  </header>

  <!-- Form Section -->
  <section class="form_container">
    <div class="form_section">
      <p>Section I -Witness Demographics</p>
    </div>
	 <div class="form_container">
	  <form id="form1" name="form1" method="post">

        <input name="textfield" type="text" class="rounded-input" id="firstname" placeholder="First Name" maxlength="40">
		 <br>
		  <br>
      <input name="textfield2" type="text" class="rounded-input" id="lastname" placeholder="Last Name" maxlength="40">
		<br>
	    <br>
   		<input name="textfield3" type="text" class="rounded-input" id="organization" placeholder="Unit or Squadron" maxlength="75">
		<br>
	    <br>
		<hr>
		<p> What was the date and time of the event?</p>
		<input type="datetime-local" class="rounded-input" placeholder="Date / Time" id="datepicker">
		<p>During the event, what was the altitude of your aircraft?</p>
		<input type="number" class="rounded-input" placeholder="Self Altitude (ft)" maxlength="20">
		<br>
	    <br>
		  <p>During the event, what was the altitude of the contact(s)?</p>
		<input type="number" class="rounded-input" placeholder="Contact Altitude (ft)" maxlength="20">
		<br>
	    <br>
		<hr>
		<p>What was the windspeed near your aircraft?</p>
		<input type="number" class="rounded-input" placeholder="Self Windspeed (kts)" maxlength="20">
		<br>
	    <br>
		<p>What was the direction of the wind near your aircraft?</p>
		<select>
			<option value="N">N</option>
			<option value="NE">NE</option>
			<option value="NE">NW</option>
			<option value="NE">E</option>
			<option value="N">S</option>
			<option value="NE">SE</option>
			<option value="NE">SW</option>
			<option value="NE">W</option>
	    </select>
		<br>
	    <br>
		<p>What was the windspeed near the contact(s)</p>
		<input type="number" class="rounded-input" placeholder="Contact Windspeed (kts)" maxlength="20">
		<br>
	    <br>
		 <p>What was the direction of the wind near the contact(s)</p>
		<select>
			<option value="N">N</option>
			<option value="NE">NE</option>
			<option value="NE">NW</option>
			<option value="NE">E</option>
			<option value="N">S</option>
			<option value="NE">SE</option>
			<option value="NE">SW</option>
			<option value="NE">W</option>
		  </select>
		<br>
	    <br>
		  <hr>
		  <p>How many objects did you observe?</p>
		  <select>
			  <option value="1">1</option>
			  <option value="2">2</option>
			  <option value="3">3</option>
			  <option value="4">4</option>
			  <option value="5">5</option>
			  <option value="6">6</option>
			  <option value="7">7</option>
			  <option value="8">8</option>
			  <option value="9">9</option>
			  <option value="10">10</option>
			  <option value="+10">+10</option>
		  </select>
		<br>
	    <br>
		<p>What was the color of the object(s)?</p>
		<input type="text" class="rounded-input" placeholder="Color" maxlength="20">
		<br>
		<br>
		<p>Using the widget below, select a color close to object(s) that were observed</p>
        <input name="favcolor" type="color" id="colorpicker" value="black"><br><br>
		<p>In less than 100 characters, describe the shape of the object i.e. "like a weather baloon", "white orb", "football-shaped"</p>
		<textarea id="shape_text_area" maxlength="100"></textarea><br><br>
		<hr>
		  <p>What was the latitude and longitude of the contact(s)?</p>
		<input type="text" class="rounded-input" placeholder="Latitude" maxlength="20">
		<br>
	    <br>
		<input type="text" class="rounded-input" placeholder="Longitude" maxlength="20">
		<br>
	    <br>
		<hr>
		<br>
		<br>
      <div id="point_select_map"></div>
      <div id="pointsAdded">
      </div>

    </div>
		 <hr>
		 <p>Did the contact register on any of your aircraft's systems such as Radar, IR, FLIR pod, etc?</p>  
		<input type="radio" name="radio_1">Yes</input>
		<input type="radio" name="radio_1">No</input>
		<br>
	  	<br>
		<p>Do you have recordings?</p>
		<input type="radio" name="radio_2">Yes</input>
		<input type="radio" name="radio_2">No</input>
		<br>
	  	<br>
		<p>Did you notice anything on the aircraft malfunctioning during this encounter with a contact?</p>
		<input type="radio" name="radio_3">Yes</input>
		<input type="radio" name="radio_3">No</input>
		<br>
	  	<br>
	  	<hr>
		<br>
		<p id="media-p"> If you have photos, videos, or other files containing evidence of the event, please upload using the button below</p>
		<br>
	    <input type="file">
		  <br>
		  <br>
		  <input type="submit" id="submit_button">
		  <br>
		  <br>
        <!-- add points here with a remove button following mapClick event
        this should be updated automattically following a mapClick event -->
      	</div>
		</form>
	</section>

  <!-- Footer Section -->
  <footer id="contact">
    <p class="hero_header">CONTACT US</p>
    <div class="button" href="mailto:test@tfemail.com">EMAIL</div>
  </footer>

<!-- Main Container Ends -->
</body>
<script>
  var points = new Array()
  var point_html = $()

  var mymap = L.map('point_select_map').setView([37.5478, -76.1572], 13);
  L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 7,
    id: 'mapbox/streets-v11',
    tileSize: 512,
    zoomOffset: -1,
    accessToken: 'pk.eyJ1IjoibWVyazQ3MiIsImEiOiJja2Nua3N5MjMwMnNuMnhtejJiMjh5NmJ6In0.5JaEL0XyjIMReCwEHpUOTA'
}).addTo(mymap);
var marker;
function onMapClick(e) {
  if (marker != null) {
    mymap.removeLayer(marker)
  }
  marker = new L.marker(e.latlng)
  mymap.addLayer(marker)
  marker.bindPopup('<b> LAT: '+e.latlng.lat+' LON: '+e.latlng.lng+'</b>').openPopup();
  points.push(e.latlng)
  $('#pointsAdded').empty()
  $('<div/>', {
  id: 'point_added',
  text: e.latlng.toString()}).appendTo('#pointsAdded')
}


function removePoint(e) {
  // remove point from points array
  // remove point from map
  return
}

function autoFill(resp) {
  console.log(resp)
  $('firstname').value(resp.metadata.label.value.split(0))
  $('lastname').value(resp.metadata.label.value.split(1))
}

function getSelf () {
  $.ajax({
    type: "GET",
    headers: {
      'Origin' : 'MerkTesting',
      'X-REQUEST-TOKEN' : 'VoVPH5Ve42CFXg1cjKXKGo'
    },
    xhrFields: {
   withCredentials: true
 },
    url: 'https://demo.brewlytics.com/blocking/api/jobs?m=91742e09-242e-4268-a750-bc75bd967023',
    xhrFields : {
      withCredentials: true
    }
  })
  .done(autoFill(data))
}
// $(document).ready(function() {
//   console.log('page loaded')
//   getSelf()
// })
mymap.on('click', onMapClick);
</script>
</html>
